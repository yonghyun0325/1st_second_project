<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="com.human.web.mapper.CommunityMapper">
	<!-- namespace: XML 파일에서 내용의 구분을 위해서 사용 -->

	<!-- 글등록 -->
	<insert id="insertBoard" parameterType="com.human.web.vo.CommunityVO">
	
		insert into tb_board (e_idx, b_title, b_content)
			values (#{e_idx}, #{b_title}, #{b_content})
	
	</insert>
	
	<!-- 글목록 조회  -->
	<select id="getBoardList" resultType="com.human.web.vo.CommunityVO">
	
		select b.*, e.name 
        from tb_board b
        join hr_employees e on b.e_idx = e.e_idx
		where b.b_status = 'N'
		order by b.b_idx desc
	
	</select>
	
	<!-- 게시글 조회 -->
	<select id="getBoard" parameterType="_int" resultType="com.human.web.vo.CommunityVO">
	
		select b.*, e.name
        from tb_board b
        join hr_employees e on b.e_idx = e.e_idx
		where b_idx = #{b_idx}
	
	</select>
	
	<!-- 조회수 증가시키기 -->
	<update id="updateReadCount" parameterType="_int">
	
		update tb_board set read_cnt = read_cnt+1 
			where b_idx=#{b_idx}
	
	</update>
	
	<!-- 글수정 -->
	<update id="updateBoard" parameterType="com.human.web.vo.CommunityVO">
	
		update tb_board set b_title=#{b_title}, 
						    b_content=#{b_content},
			                update_date = now() 
			  where b_idx = #{b_idx}
	
	</update>
	
	<!-- 글삭제 -->
	<update id="deleteBoard" parameterType="_int">
	
		update tb_board set b_status='Y', update_date = now() 
			where b_idx = #{b_idx}
	
	</update>
	
	
	
	
	
</mapper>	
